/* ---------- CSS Reset / base ---------- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;scroll-behavior:smooth}
img,svg{vertical-align:middle}
button{font:inherit;background:none;border:none;cursor:pointer}

/* ---------- Variables ---------- */
:root{
  --accent:#667eea;          /* фиолетово-индиговый акцент */
  --accent-grad:#667eea 0%,#764ba2 50%,#f093fb 100%;
  --bg:#111;                /* тёмный фон */
  --fg:#f1f1f1;             /* основной текст */
  --glass-bg:rgba(255,255,255,.08);
  --glass-brd:rgba(255,255,255,.20);
  --radius:1.5rem;
  --shadow:0 25px 45px rgba(0,0,0,.2);
  --font:'Inter',system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
}

@media (prefers-color-scheme:light){
  :root{
    --bg:#fafafa;
    --fg:#222;
    --glass-bg:rgba(0,0,0,.05);
    --glass-brd:rgba(0,0,0,.1);
    --shadow:0 15px 25px rgba(0,0,0,.1);
  }
}

/* ---------- Body / Typography ---------- */
body{
  font-family:var(--font);
  background:var(--bg);
  color:var(--fg);
  overflow-x:hidden;
  line-height:1.5;
}

/* ---------- Particles backdrop ---------- */
.particles{
  position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(circle at 20% 30%,rgba(255,255,255,.04) 0,transparent 70%),
             radial-gradient(circle at 80% 70%,rgba(255,255,255,.05) 0,transparent 70%);
  animation:moveBg 20s linear infinite;
}
@keyframes moveBg{to{background-position:200% 200%, -200% -200%}}

/* ---------- Topbar ---------- */
.topbar{
  position:fixed;top:0;left:0;right:0;
  display:flex;justify-content:space-between;align-items:center;
  padding:.75rem 1.25rem;z-index:50;
  backdrop-filter:blur(14px);
  background:var(--glass-bg);
  border-bottom:1px solid var(--glass-brd);
}
.topbar__logo{
  font-weight:900;font-size:1.25rem;background:linear-gradient(45deg,var(--accent-grad));
  background-clip:text;-webkit-text-fill-color:transparent;
}
.topbar__user{display:flex;gap:.5rem;align-items:center;color:var(--fg);font-size:.9rem}

/* ---------- Main title ---------- */
.main-title{
  text-align:center;margin:3.75rem 0 2.25rem;
  font-size:clamp(2.5rem,8vw,5.5rem);font-weight:900;
  background:linear-gradient(45deg,var(--accent-grad));
  background-size:400% 400%;background-clip:text;-webkit-text-fill-color:transparent;
  animation:gradientShift 6s ease infinite;
  text-shadow:0 0 30px rgba(255,255,255,.25);
}
@keyframes gradientShift{50%{background-position:100% 50%}}

/* ---------- Category grid ---------- */
.categories-container{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
  gap:.85rem;max-width:780px;margin:0 auto 2.5rem;padding:0 1rem;
}
.category-btn{
  display:inline-block;padding:1rem .5rem;
  border-radius:9999px;border:2px solid var(--glass-brd);
  background:var(--glass-bg);color:var(--fg);font-weight:600;
  text-transform:uppercase;font-size:.8rem;letter-spacing:.5px;
  transition:.28s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;
}
.category-btn::before{
  content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);
  transform:translateX(-100%);transition:.6s;
}
.category-btn:hover::before{transform:translateX(100%)}
.category-btn:hover{
  transform:translateY(-4px) scale(1.05);box-shadow:0 12px 30px rgba(0,0,0,.25);
}
.category-btn[aria-pressed="true"]{
  background:var(--accent);color:#fff;box-shadow:0 10px 25px rgba(102,126,234,.55);
}

/* ---------- Phrase card ---------- */
.phrase-container{
  max-width:720px;margin:0 auto;padding:2.5rem 2rem;
  background:var(--glass-bg);border:1px solid var(--glass-brd);
  border-radius:var(--radius);box-shadow:var(--shadow);position:relative;
}
.phrase-container::after{
  content:'';position:absolute;inset:-2px;border-radius:calc(var(--radius) + 2px);
  background:linear-gradient(45deg,var(--accent-grad));opacity:.0;transition:.3s;
  z-index:-1;
}
.phrase-container:hover::after{opacity:.4}

.phrase-text{
  min-height:100px;font-size:1.35rem;font-weight:300;text-align:center;
  display:flex;align-items:center;justify-content:center;margin-bottom:2rem;
  opacity:0;transform:translateY(20px);
}
.phrase-text.show{animation:fadeInUp .6s forwards}
@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}

.next-btn{
  display:block;margin:0 auto;background:var(--accent);color:#fff;
  padding:1rem 3rem;border-radius:9999px;font-weight:600;letter-spacing:1px;
  transition:.3s;position:relative;overflow:hidden;
}
.next-btn::after{
  content:'';position:absolute;top:50%;left:50%;width:0;height:0;
  background:rgba(255,255,255,.25);border-radius:50%;transform:translate(-50%,-50%);
  transition:width .6s,height .6s;
}
.next-btn:hover::after{width:280px;height:280px}
.next-btn:hover{transform:translateY(-3px);box-shadow:0 12px 28px rgba(0,0,0,.25)}

/* ---------- Chat bubble ---------- */
.chat-bubble{
  position:fixed;bottom:1.2rem;right:1.2rem;z-index:60;
  background:var(--accent);width:54px;height:54px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-size:1.35rem;color:#fff;
  box-shadow:0 8px 18px rgba(102,126,234,.4);transition:.25s;
}
.chat-bubble:hover{transform:translateY(-4px) scale(1.05)}

.chat-window{
  position:fixed;bottom:7rem;right:1rem;width:320px;max-height:480px;
  display:flex;flex-direction:column;background:var(--glass-bg);
  border:1px solid var(--glass-brd);border-radius:var(--radius);box-shadow:var(--shadow);
  overflow:hidden;backdrop-filter:blur(20px);z-index:70;
}
.chat-head{display:flex;justify-content:space-between;padding:.6rem 1rem;background:var(--accent);color:#fff;font-weight:600}
.chat-log{flex:1;padding:1rem;overflow-y:auto;font-size:.9rem;display:flex;flex-direction:column;gap:.75rem}
.chat-msg{padding:.6rem 1rem;border-radius:1.1rem;max-width:90%}
.chat-msg.bot{background:var(--glass-bg);align-self:flex-start}
.chat-msg.user{background:var(--accent);color:#fff;align-self:flex-end}
.chat-form{display:flex;border-top:1px solid var(--glass-brd)}
.chat-form input{flex:1;padding:.8rem;background:transparent;color:var(--fg);border:none}
.chat-form button{padding:.8rem 1rem;color:var(--accent);font-weight:600}

/* ---------- Sign-in panel ---------- */
.signin-panel{text-align:center;margin-bottom:2.5rem}
.hint{font-size:.85rem;opacity:.7;margin-top:.5rem}

/* ---------- Utility ---------- */
.hidden{display:none}
.sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* ---------- Scrollbar ---------- */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}

/* ---------- Breakpoints ---------- */
@media (min-width:768px){
  .chat-window{width:360px}
  .phrase-text{font-size:1.6rem}
}
@media (min-width:1024px){
  .categories-container{gap:1rem}
  .main-title{margin-top:4.5rem}
}
